# Video Player API

–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π API —Å–µ—Ä–≤–∏—Å –¥–ª—è –≤–µ–±-–ø–ª–µ–µ—Ä–∞ –≤–∏–¥–µ–æ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HLS —Å—Ç—Ä–∏–º–∏–Ω–≥–∞.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üé• –ü–æ–¥–¥–µ—Ä–∂–∫–∞ MP4, WebM, HLS (.m3u8) —Ñ–æ—Ä–º–∞—Ç–æ–≤
- üîê –ü—Ä–æ—Å—Ç–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–æ–∫–µ–Ω—É
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚ö° –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞ —Å JSON —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º
- üéØ –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∫–æ–¥

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
uv sync
```

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –ß–µ—Ä–µ–∑ –º–æ–¥—É–ª—å app
uv run python -m app

# –ò–ª–∏ —á–µ—Ä–µ–∑ main.py
uv run python main.py
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://127.0.0.1:8000`

## API Endpoints

### –ü—É–±–ª–∏—á–Ω—ã–µ (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- `GET /` - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–ª–µ–µ—Ä–∞
- `GET /videos` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–∏–¥–µ–æ
- `GET /videos/{id}` - –ü–æ–ª—É—á–∏—Ç—å –≤–∏–¥–µ–æ –ø–æ ID
- `GET /health` - –°—Ç–∞—Ç—É—Å API

### –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ (—Ç—Ä–µ–±—É—é—Ç —Ç–æ–∫–µ–Ω)
- `POST /videos` - –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ
- `DELETE /videos/{id}` - –£–¥–∞–ª–∏—Ç—å –≤–∏–¥–µ–æ

## –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–î–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:
```
Authorization: Bearer video-player-token-2024
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/
‚îú‚îÄ‚îÄ __main__.py      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è python -m app
‚îú‚îÄ‚îÄ models.py        # Pydantic –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ storage.py       # JSON —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
‚îî‚îÄ‚îÄ api/             # API —Å–ª–æ–π
    ‚îú‚îÄ‚îÄ __init__.py  # –°–æ–∑–¥–∞–Ω–∏–µ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ deps/        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    ‚îÇ   ‚îî‚îÄ‚îÄ auth.py  # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
    ‚îî‚îÄ‚îÄ routers/     # API —Ä–æ—É—Ç–µ—Ä—ã
        ‚îú‚îÄ‚îÄ __init__.py
        ‚îî‚îÄ‚îÄ videos.py # –†–æ—É—Ç–µ—Ä –¥–ª—è –≤–∏–¥–µ–æ
static/
‚îî‚îÄ‚îÄ index.html       # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
main.py              # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
videos.json          # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ API
```bash
curl -X POST "http://127.0.0.1:8000/videos" \
  -H "Authorization: Bearer video-player-token-2024" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "–¢–µ—Å—Ç–æ–≤–æ–µ –≤–∏–¥–µ–æ",
    "url": "https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4",
    "duration": 30
  }'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤–∏–¥–µ–æ
```bash
curl "http://127.0.0.1:8000/videos"
```

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

- **MP4, WebM** - –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–∏–¥–µ–æ—Ñ–∞–π–ª—ã
- **HLS (.m3u8)** - adaptive streaming —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∫–∞—á–µ—Å—Ç–≤–æ–º
- **–í–Ω–µ—à–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏** - YouTube, Vimeo (—á–µ—Ä–µ–∑ –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏)

## –¢–µ—Å—Ç–æ–≤—ã–µ –≤–∏–¥–µ–æ

–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

**MP4:**
- URL: `https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4`
- –ù–∞–∑–≤–∞–Ω–∏–µ: `Big Buck Bunny`

**HLS:**
- URL: `https://demo.unified-streaming.com/k8s/features/stable/video/tears-of-steel/tears-of-steel.ism/.m3u8`
- –ù–∞–∑–≤–∞–Ω–∏–µ: `HLS Demo Stream`

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
- –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã
- JSON —Ñ–∞–π–ª –≤–º–µ—Å—Ç–æ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ—Å—Ç–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–æ–∫–µ–Ω—É

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ —Ä–æ—É—Ç–µ—Ä—ã –≤ `app/routers/`
- –†–∞—Å—à–∏—Ä—å—Ç–µ –º–æ–¥–µ–ª–∏ –≤ `app/models.py`
- –ò–∑–º–µ–Ω–∏—Ç–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ `app/storage.py`

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å–∞–º:
- Swagger UI: `http://127.0.0.1:8000/docs`
- ReDoc: `http://127.0.0.1:8000/redoc`